yamllint:
  stage: lint
  allow_failure: true
  interruptible: true
  image:
    name: donaldrich/function:yamllint
    entrypoint: [""]
  before_script:
    - yamllint --version
  script:
    - yamllint -f colored .
  rules:
    - changes:
        - "**/*/*.yaml"
        - "**/*/*.yml"
      when: always
    - exists:
        - "**/*/*.yaml"
        - "**/*/*.yml"
      when: manual
    - when: never
