markdownlint:
  allow_failure: true
  interruptible: true
  stage: lint
  image:
    name: ruby:alpine
    entrypoint: [""]
  before_script:
    - gem install mdl
    - mdl --version
  script:
    - mdl --style all --warnings .
  rules:
    - if: '$DEBUG_PIPELINE'
      when: never
    - changes:
      - "**/*/*.md"
      when: manual
    - exists:
      - "**/*/*.md"
      when: manual
    - when: never