sn1per:
  stage: .pre
  allow_failure: true
  interruptible: true
  image:
    name: xerosecurity/sn1per
    entrypoint: [""]
  before_script:
    - sniper --help
  script:
    - apt update && apt install -y fprobe whatweb jq wafw00f net-tools
    # sniper -c /full/path/to/sniper.conf -t <TARGET> -m <MODE> -w <WORKSPACE>
    - /bin/bash
    # - sniper -t 192.168.1.0/16 -m discover -w sniper-report
    - sniper -t 192.168.1.11 -m stealth -o -re -w sniper-report
    - cp /usr/share/sn1per/loot/sniper-report $CI_PROJECT_DIR/sniper
    - sniper -w sniper-report --export
    - cp /usr/share/sn1per/loot/sniper-report.tar $CI_PROJECT_DIR/sniper-archive
  artifacts:
    name: "sniper"
    paths:
      - $CI_PROJECT_DIR/sniper/
      - $CI_PROJECT_DIR/sniper-archive/
    when: always